"use strict";(self.webpackChunkfrontend_time=self.webpackChunkfrontend_time||[]).push([[450],{2450:(T,A,i)=>{i.r(A),i.d(A,{AdminDashboardModule:()=>b});var g=i(8583),p=i(4655),f=i(8239),l=i(3679),r=i(2238),e=i(7716),d=i(8295),Z=i(9983),u=i(3220),h=i(1095);function y(a,c){1&a&&(e.TgZ(0,"mat-error"),e._uU(1,"Invalid start date"),e.qZA())}function C(a,c){1&a&&(e.TgZ(0,"mat-error"),e._uU(1,"Invalid end date"),e.qZA())}let M=(()=>{class a{constructor(n,t){this.dialogRef=n,this.data=t,this.range=new l.cw({start:new l.NI("",l.kI.required),end:new l.NI("",l.kI.required)})}ngOnInit(){}onNoClick(){this.dialogRef.close()}}return a.\u0275fac=function(n){return new(n||a)(e.Y36(r.so),e.Y36(r.WI))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-add-general-activity"]],decls:31,vars:9,consts:[[1,"container","mt-2","text-center"],["mat-dialog-title",""],["mat-dialog-content",""],[1,"row","justify-content-center"],["appearance","fill",1,"inputs"],["matInput","","placeholder","Ingrese el nombre de la actividad que desea registrar",3,"ngModel","ngModelChange"],["type","number","min","0","matInput","","placeholder","N\xfamero de horas estimadas para la finalizaci\xf3n!",3,"ngModel","ngModelChange"],["appearance","fill",1,"filtro"],[3,"rangePicker"],["matStartDate","","placeholder","Start date",3,"ngModel","ngModelChange"],["matEndDate","","placeholder","End date",3,"ngModel","ngModelChange"],["matSuffix","",3,"for"],["picker",""],[4,"ngIf"],["mat-dialog-actions","",1,"justify-content-center"],["mat-button","",3,"click"],["mat-raised-button","","color","primary","cdkFocusInitial","",3,"mat-dialog-close"]],template:function(n,t){if(1&n&&(e.TgZ(0,"div",0),e.TgZ(1,"h1",1),e._uU(2,"Agregar Actividad General"),e.qZA(),e.TgZ(3,"div",2),e.TgZ(4,"p"),e._uU(5,"Registrar una actividad que todos los usuarios tendr\xe1n en el project plan:"),e.qZA(),e.TgZ(6,"div",3),e.TgZ(7,"mat-form-field",4),e.TgZ(8,"mat-label"),e._uU(9,"Actividad"),e.qZA(),e.TgZ(10,"input",5),e.NdJ("ngModelChange",function(s){return t.data.name=s}),e.qZA(),e.qZA(),e.TgZ(11,"mat-form-field",4),e.TgZ(12,"mat-label"),e._uU(13,"Horas Estimadas"),e.qZA(),e.TgZ(14,"input",6),e.NdJ("ngModelChange",function(s){return t.data.estimated_hours=s}),e.qZA(),e.qZA(),e.TgZ(15,"mat-form-field",7),e.TgZ(16,"mat-label"),e._uU(17,"Seleccione fecha inicial y final"),e.qZA(),e.TgZ(18,"mat-date-range-input",8),e.TgZ(19,"input",9),e.NdJ("ngModelChange",function(s){return t.data.initial_date=s}),e.qZA(),e.TgZ(20,"input",10),e.NdJ("ngModelChange",function(s){return t.data.end_date=s}),e.qZA(),e.qZA(),e._UZ(21,"mat-datepicker-toggle",11),e._UZ(22,"mat-date-range-picker",null,12),e.YNc(24,y,2,0,"mat-error",13),e.YNc(25,C,2,0,"mat-error",13),e.qZA(),e.qZA(),e.qZA(),e.TgZ(26,"div",14),e.TgZ(27,"button",15),e.NdJ("click",function(){return t.onNoClick()}),e._uU(28,"Cancelar"),e.qZA(),e.TgZ(29,"button",16),e._uU(30,"Guardar"),e.qZA(),e.qZA(),e.qZA()),2&n){const o=e.MAs(23);e.xp6(10),e.Q6J("ngModel",t.data.name),e.xp6(4),e.Q6J("ngModel",t.data.estimated_hours),e.xp6(4),e.Q6J("rangePicker",o),e.xp6(1),e.Q6J("ngModel",t.data.initial_date),e.xp6(1),e.Q6J("ngModel",t.data.end_date),e.xp6(1),e.Q6J("for",o),e.xp6(3),e.Q6J("ngIf",t.range.controls.start.hasError("matStartDateInvalid")),e.xp6(1),e.Q6J("ngIf",t.range.controls.end.hasError("matEndDateInvalid")),e.xp6(4),e.Q6J("mat-dialog-close",t.data)}},directives:[r.uh,r.xY,d.KE,d.hX,Z.Nt,l.Fj,l.JJ,l.On,l.qQ,l.wV,u.wx,u.zY,u.By,u.nW,d.R9,u._g,g.O5,r.H8,h.lW,r.ZT,d.TO],styles:[".inputs[_ngcontent-%COMP%]{width:100%}"]}),a})();function U(a,c){1&a&&(e.TgZ(0,"mat-error"),e._uU(1,"Invalid start date"),e.qZA())}function q(a,c){1&a&&(e.TgZ(0,"mat-error"),e._uU(1,"Invalid end date"),e.qZA())}let I=(()=>{class a{constructor(n,t){this.dialogRef=n,this.data=t,this.range=new l.cw({start:new l.NI("",l.kI.required),end:new l.NI("",l.kI.required)})}ngOnInit(){}onNoClick(){this.dialogRef.close()}}return a.\u0275fac=function(n){return new(n||a)(e.Y36(r.so),e.Y36(r.WI))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-add-specific-activity"]],decls:31,vars:9,consts:[[1,"container","mt-2","text-center"],["mat-dialog-title",""],["mat-dialog-content",""],[1,"row","justify-content-center"],["appearance","fill",1,"inputs"],["matInput","","placeholder","Ingrese el nombre de la actividad que desea registrar",3,"ngModel","ngModelChange"],["type","number","min","0","matInput","","placeholder","N\xfamero de horas estimadas para la finalizaci\xf3n!",3,"ngModel","ngModelChange"],["appearance","fill",1,"filtro"],[3,"rangePicker"],["matStartDate","","placeholder","Start date",3,"ngModel","ngModelChange"],["matEndDate","","placeholder","End date",3,"ngModel","ngModelChange"],["matSuffix","",3,"for"],["picker",""],[4,"ngIf"],["mat-dialog-actions","",1,"justify-content-center"],["mat-button","",3,"click"],["mat-raised-button","","color","primary","cdkFocusInitial","",3,"mat-dialog-close"]],template:function(n,t){if(1&n&&(e.TgZ(0,"div",0),e.TgZ(1,"h1",1),e._uU(2,"Agregar Actividad General"),e.qZA(),e.TgZ(3,"div",2),e.TgZ(4,"p"),e._uU(5,"Registrar una actividad que todos los usuarios tendr\xe1n en el project plan:"),e.qZA(),e.TgZ(6,"div",3),e.TgZ(7,"mat-form-field",4),e.TgZ(8,"mat-label"),e._uU(9,"Actividad"),e.qZA(),e.TgZ(10,"input",5),e.NdJ("ngModelChange",function(s){return t.data.name=s}),e.qZA(),e.qZA(),e.TgZ(11,"mat-form-field",4),e.TgZ(12,"mat-label"),e._uU(13,"Horas Estimadas"),e.qZA(),e.TgZ(14,"input",6),e.NdJ("ngModelChange",function(s){return t.data.estimated_hours=s}),e.qZA(),e.qZA(),e.TgZ(15,"mat-form-field",7),e.TgZ(16,"mat-label"),e._uU(17,"Seleccione fecha inicial y final"),e.qZA(),e.TgZ(18,"mat-date-range-input",8),e.TgZ(19,"input",9),e.NdJ("ngModelChange",function(s){return t.data.initial_date=s}),e.qZA(),e.TgZ(20,"input",10),e.NdJ("ngModelChange",function(s){return t.data.end_date=s}),e.qZA(),e.qZA(),e._UZ(21,"mat-datepicker-toggle",11),e._UZ(22,"mat-date-range-picker",null,12),e.YNc(24,U,2,0,"mat-error",13),e.YNc(25,q,2,0,"mat-error",13),e.qZA(),e.qZA(),e.qZA(),e.TgZ(26,"div",14),e.TgZ(27,"button",15),e.NdJ("click",function(){return t.onNoClick()}),e._uU(28,"Cancelar"),e.qZA(),e.TgZ(29,"button",16),e._uU(30,"Guardar"),e.qZA(),e.qZA(),e.qZA()),2&n){const o=e.MAs(23);e.xp6(10),e.Q6J("ngModel",t.data.name),e.xp6(4),e.Q6J("ngModel",t.data.estimated_hours),e.xp6(4),e.Q6J("rangePicker",o),e.xp6(1),e.Q6J("ngModel",t.data.initial_date),e.xp6(1),e.Q6J("ngModel",t.data.end_date),e.xp6(1),e.Q6J("for",o),e.xp6(3),e.Q6J("ngIf",t.range.controls.start.hasError("matStartDateInvalid")),e.xp6(1),e.Q6J("ngIf",t.range.controls.end.hasError("matEndDateInvalid")),e.xp6(4),e.Q6J("mat-dialog-close",t.data)}},directives:[r.uh,r.xY,d.KE,d.hX,Z.Nt,l.Fj,l.JJ,l.On,l.qQ,l.wV,u.wx,u.zY,u.By,u.nW,d.R9,u._g,g.O5,r.H8,h.lW,r.ZT,d.TO],styles:[".inputs[_ngcontent-%COMP%]{width:100%}"]}),a})();var P=i(4109),E=i(9525),S=i(9133),N=i(1769),R=i(6627),v=i(171);function J(a,c){if(1&a&&(e.TgZ(0,"mat-expansion-panel",12),e.TgZ(1,"mat-expansion-panel-header"),e.TgZ(2,"mat-panel-title"),e._uU(3),e.qZA(),e.TgZ(4,"mat-panel-description"),e._uU(5),e.ALo(6,"date"),e.ALo(7,"date"),e.qZA(),e.qZA(),e.qZA()),2&a){const n=c.$implicit;e.xp6(3),e.AsE(" ",n.name," - ",n.estimated_hours," Horas "),e.xp6(2),e.AsE(" ",e.xi3(6,4,n.initial_date,"dd/MM/yyyy")," - ",e.xi3(7,7,n.end_date,"dd/MM/yyyy")," ")}}function D(a,c){if(1&a&&(e.ynx(0),e.TgZ(1,"p",13),e._uU(2),e.qZA(),e.BQk()),2&a){const n=c.$implicit,t=e.oxw().$implicit,o=e.oxw();e.xp6(2),e.Oqu(o.getUserResume(t,n))}}function x(a,c){if(1&a&&(e.TgZ(0,"mat-expansion-panel"),e.TgZ(1,"mat-expansion-panel-header"),e.TgZ(2,"mat-panel-title"),e._uU(3),e.qZA(),e.TgZ(4,"mat-panel-description"),e._uU(5),e.ALo(6,"date"),e.ALo(7,"date"),e.qZA(),e.qZA(),e.YNc(8,D,3,1,"ng-container",11),e.qZA()),2&a){const n=c.$implicit;e.xp6(3),e.AsE(" ",n.name," - ",n.estimated_hours," Horas "),e.xp6(2),e.AsE(" ",e.xi3(6,5,n.initial_date,"dd/MM/yyyy")," - ",e.xi3(7,8,n.end_date,"dd/MM/yyyy")," "),e.xp6(3),e.Q6J("ngForOf",n.users)}}const O=[{path:"",component:(()=>{class a{constructor(n,t,o,s){this.activityService=n,this.userService=t,this.dialog=o,this.sweetAlert=s,this.generalActivities=[],this.specificActivities=[],this.data={name:"",initial_date:new Date,end_date:new Date,estimated_hours:0,open_state:!1,is_general:!1}}ngOnInit(){this.loadData()}loadData(){this.activityService.getActivities().subscribe(n=>{this.generalActivities=n.activities.filter(t=>t.is_general),this.specificActivities=n.activities.filter(t=>!t.is_general)},n=>{console.log(n)})}addGeneral(){this.dialog.open(M,{width:"85%",data:this.data}).afterClosed().subscribe(t=>{if(t)if(this.verifyActivityData(t)){const s=t;s.is_general=!0,this.activityService.createActivity(s).subscribe(m=>{this.generalActivities.push(m.activity),this.sweetAlert.presentSuccess("Actividad Agregada Correctamente!")},m=>{console.log(m)})}else this.sweetAlert.presentError("Informaci\xf3n Inv\xe1lida!")})}getUserNameById(n){var t=this;return(0,f.Z)(function*(){const o=yield t.userService.getUserById(n);return console.log("user: ",o),"Generic"})()}addSpecific(){this.dialog.open(I,{width:"85%",data:this.data}).afterClosed().subscribe(t=>{if(t)if(this.verifyActivityData(t)){const s=t;s.is_general=!1,this.activityService.createActivity(s).subscribe(m=>{this.specificActivities.push(m.activity),this.sweetAlert.presentSuccess("Actividad Agregada Correctamente!")},m=>{console.log(m)})}else this.sweetAlert.presentError("Informaci\xf3n Inv\xe1lida!")})}verifyActivityData(n){return!!(n.name&&n.initial_date&&n.end_date&&n.estimated_hours)}getUserResume(n,t){var o;let s=0,m="";if(m+=t.user.name.toUpperCase(),-1!==(null===(o=n.users)||void 0===o?void 0:o.findIndex(_=>_.user._id==t.user._id))){const _=t.worked_hours||0;try{s=100*_/n.estimated_hours}catch(j){console.log("Division 0/0")}}return m+=` --- Indicador: ${s}%`,m}}return a.\u0275fac=function(n){return new(n||a)(e.Y36(P.M),e.Y36(E.K),e.Y36(r.uw),e.Y36(S.T))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-resume-project-plan"]],decls:34,vars:2,consts:[[1,"container","mt-3","mb-3"],[1,"row","ml-1","md-6","justify-content-center"],[1,"row"],[1,"col-md-4","col-xs-4"],["mat-raised-button","","color","primary",1,"boton","mt-3",3,"click"],[1,"row","mt-2","ml-1"],[1,"mt-2","ml-2"],[1,"row","mt-1"],[1,"w-100"],["hideToggle","",4,"ngFor","ngForOf"],[1,"row","mt-2"],[4,"ngFor","ngForOf"],["hideToggle",""],[2,"color","red"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"h1"),e._uU(3,"Resumen General del Project Plan"),e.qZA(),e.qZA(),e._UZ(4,"mat-divider"),e.TgZ(5,"div",2),e.TgZ(6,"div",3),e.TgZ(7,"button",4),e.NdJ("click",function(){return t.addGeneral()}),e._uU(8," Agregar General "),e.TgZ(9,"mat-icon"),e._uU(10,"add"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"div",5),e.TgZ(12,"h2"),e._uU(13,"Actividades Generales:"),e.qZA(),e.TgZ(14,"p",6),e._uU(15,"Son aquellas actividades que todos los usuarios tienen en com\xfan"),e.qZA(),e.qZA(),e.TgZ(16,"div",7),e.TgZ(17,"mat-accordion",8),e.YNc(18,J,8,10,"mat-expansion-panel",9),e.qZA(),e.qZA(),e._UZ(19,"mat-divider"),e.TgZ(20,"div",10),e.TgZ(21,"div",3),e.TgZ(22,"button",4),e.NdJ("click",function(){return t.addSpecific()}),e._uU(23," Agregar Espec\xedfico "),e.TgZ(24,"mat-icon"),e._uU(25,"add"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(26,"div",5),e.TgZ(27,"h2"),e._uU(28,"Actividades Espec\xedficas:"),e.qZA(),e.TgZ(29,"p",6),e._uU(30,"Son aquellas actividades que se le pueden asignar a un usuario en concreto"),e.qZA(),e.qZA(),e.TgZ(31,"div",7),e.TgZ(32,"mat-accordion",8),e.YNc(33,x,9,11,"mat-expansion-panel",11),e.qZA(),e.qZA(),e.qZA()),2&n&&(e.xp6(18),e.Q6J("ngForOf",t.generalActivities),e.xp6(15),e.Q6J("ngForOf",t.specificActivities))},directives:[N.d,h.lW,R.Hw,v.pp,g.sg,v.ib,v.yz,v.yK,v.u4],pipes:[g.uU],styles:[".mat-form-field[_ngcontent-%COMP%] + .mat-form-field[_ngcontent-%COMP%]{margin-left:8px}.w-100[_ngcontent-%COMP%]{width:100%}"]}),a})()},{path:"users",loadChildren:()=>i.e(364).then(i.bind(i,8364)).then(a=>a.UsersModule)}];let w=(()=>{class a{}return a.\u0275fac=function(n){return new(n||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[[p.Bz.forChild(O)],p.Bz]}),a})();var F=i(37);let b=(()=>{class a{}return a.\u0275fac=function(n){return new(n||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[[g.ez,w,F.m]]}),a})()},4109:(T,A,i)=>{i.d(A,{M:()=>l});var g=i(1841),p=i(2340),f=i(7716);let l=(()=>{class r{constructor(d){this.http=d}createActivity(d){return this.http.post(`${p.N.API_URL}/activities`,d)}getActivities(d){const Z={params:(new g.LE).set("specific",!!d)};return this.http.get(`${p.N.API_URL}/activities`,Z)}assignActivity(d){return this.http.patch(`${p.N.API_URL}/activities/${d.activity_id}`,d)}}return r.\u0275fac=function(d){return new(d||r)(f.LFG(g.eN))},r.\u0275prov=f.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})()},9525:(T,A,i)=>{i.d(A,{K:()=>l});var g=i(2340),p=i(7716),f=i(1841);let l=(()=>{class r{constructor(d){this.http=d}getAllUsers(){return this.http.get(`${g.N.API_URL}/users`)}createUser(d){return this.http.post(`${g.N.API_URL}/users`,d)}getUserById(d){return this.http.get(`${g.N.API_URL}/users/${d}`)}}return r.\u0275fac=function(d){return new(d||r)(p.LFG(f.eN))},r.\u0275prov=p.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})()}}]);